!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("@firestitch/api",[],t):"object"==typeof exports?exports["@firestitch/api"]=t():e["@firestitch/api"]=t()}("undefined"!=typeof self?self:this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s="./index.ts")}({"./classes/fsapiconfig.ts":function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(s=(i<3?o(s):i>3?o(t,n,s):o(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var s,c=n("@angular/core");!function(e){e.body="body",e.httpEvent="httpEvent"}(s=t.ResponseType||(t.ResponseType={}));var a=function(){function e(e){this.config=e,this.headers={},this.encoding="json",this.key=null,this.query={},this.responseType=s.body,Object.assign(this,e||{})}return e.prototype.appendHeader=function(e,t){this.headers[e]=t},e=r([c.Injectable(),i(0,c.Optional()),i(0,c.Inject("FsApiConfig")),o("design:paramtypes",[Object])],e)}();t.FsApiConfig=a},"./classes/fsapihandler.ts":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){this.http=e}return e.prototype.handle=function(e){return this.http.request(e)},e}();t.FsApiHandler=r},"./classes/index.ts":function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),r(n("./classes/fsapiconfig.ts")),r(n("./classes/fsapihandler.ts"))},"./fsapi.module.ts":function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(s=(i<3?o(s):i>3?o(t,n,s):o(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0});var o=n("@angular/common/http"),i=n("./index.ts"),s=n("@angular/core"),c=n("@angular/common"),a=function(){function e(){}return t=e,e.forRoot=function(){return{ngModule:t,providers:[i.FsApiConfig,i.FsApi]}},e=t=r([s.NgModule({imports:[c.CommonModule,o.HttpClientModule],declarations:[],providers:[i.FsApi,i.FsApiConfig],exports:[]})],e);var t}();t.FsApiModule=a},"./index.ts":function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),r(n("./services/index.ts")),r(n("./classes/index.ts")),r(n("./fsapi.module.ts"))},"./services/fsapi.service.ts":function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(s=(i<3?o(s):i>3?o(t,n,s):o(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var i=n("@angular/core"),s=n("rxjs/Observable"),c=n("@angular/common/http"),a=n("moment-timezone"),u=n("./classes/index.ts"),p=n("lodash"),f=function(){function e(e,t){this.FsApiConfig=e,this.http=t,this.events=[]}return e.prototype.get=function(e,t,n){return this.request("GET",e,t,n)},e.prototype.post=function(e,t,n){return this.request("POST",e,t,n)},e.prototype.put=function(e,t,n){return this.request("PUT",e,t,n)},e.prototype.delete=function(e,t,n){return this.request("DELETE",e,t,n)},e.prototype.request=function(e,t,n,r){var o=this;r=Object.assign({},this.FsApiConfig,r),e=e.toUpperCase(),n=Object.assign({},n),this.sanitize(n),"GET"===e&&(r.query=n,n={});var i=new c.HttpHeaders;p.forEach(r.headers,function(e,t){i=i.set(t,e)});var a=!1;p.forEach(n,function(e){(e instanceof File||e instanceof Blob)&&(a=!0,r.encoding="formdata")});var f=null;"url"===r.encoding?(i=i.set("Content-Type","application/x-www-form-urlencoded"),f=n):"json"===r.encoding?(i=i.set("Content-Type","text/json"),f=JSON.stringify(n)):"formdata"===r.encoding&&(i=i.delete("Content-Type"),f=new FormData,p.forEach(n,function(e,t){null!=e&&e.name?f.append(t,e,e.name):f.append(t,e)}));var l=new c.HttpParams;p.forEach(r.query,function(e,t){l=l.append(t,e)});var d=new c.HttpRequest(e,t,f,{headers:i,params:l,reportProgress:r.reportProgress});return r.reportProgress&&(r.responseType=u.ResponseType.httpEvent),this.trigger("begin",d,r),s.Observable.create(function(e){o.intercept(r,d,new u.FsApiHandler(o.http)).subscribe(function(t){r.responseType==u.ResponseType.httpEvent?e.next(t):t.type===c.HttpEventType.Response&&(o.trigger("success",t,r),e.next(t.body))},function(t){o.trigger("error",t,r),e.error(t)},function(){o.trigger("complete",{},r),e.complete()})})},e.prototype.on=function(e,t){return this.events.push({name:e,func:t}),this},e.prototype.trigger=function(e,t,n){return p.forEach(this.events,function(r){e===r.name&&r.func(t,n)}),this},e.prototype.intercept=function(e,t,n){return n.handle(t)},e.prototype.sanitize=function(e){var t=this;return p.forEach(e,function(n,r){a&&a.isMoment(n)?e[r]=n.format():n instanceof Date?e[r]=a(n).format():void 0===n?delete e[r]:p.isObject(n)&&t.sanitize(n)}),e},e=r([i.Injectable(),o("design:paramtypes",[u.FsApiConfig,c.HttpClient])],e)}();t.FsApi=f},"./services/index.ts":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}(n("./services/fsapi.service.ts"))},"@angular/common":function(e,t){e.exports=require("@angular/common")},"@angular/common/http":function(e,t){e.exports=require("@angular/common/http")},"@angular/core":function(e,t){e.exports=require("@angular/core")},lodash:function(e,t){e.exports=require("lodash")},"moment-timezone":function(e,t){e.exports=require("moment-timezone")},"rxjs/Observable":function(e,t){e.exports=require("rxjs/Observable")}})});